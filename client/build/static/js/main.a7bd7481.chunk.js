(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{149:function(e,t,a){e.exports=a(281)},156:function(e,t,a){},172:function(e,t){},174:function(e,t){},207:function(e,t){},208:function(e,t){},274:function(e,t,a){},281:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(58),i=a.n(r),o=(a(154),a(155),a(156),a(139)),s=a(65),c=a.n(s),m=a(51),u=a(140),h=a(141),d=a(147),p=a(142),g=a(148),E=(a(92),a(19)),f=a.n(E),y=(a(274),a(307)),v=a(309),b=a(297),w=a(310),M=a(63),C=a(290),k=a(291),F=a(292),S=a(293),L=a(294),N=a(284),x=a(295),R=a(296),j=a(285),W=a(143),O=a(287),T=a(3),I=a.n(T),z=(a(283),a(286),a(288),a(308),a(306),a(289),function(e){var t=Object(n.useState)("1"),a=Object(M.a)(t,2),r=a[0],i=a[1],o=function(e){r!==e&&i(e)};return l.a.createElement("div",null,l.a.createElement(C.a,{tabs:!0},l.a.createElement(k.a,null,l.a.createElement(F.a,{className:I()({active:"1"===r}),onClick:function(){o("1")}},"Current")),l.a.createElement(k.a,null,l.a.createElement(F.a,{className:I()({active:"2"===r}),onClick:function(){o("2")}},"Topography")),l.a.createElement(k.a,null,l.a.createElement(F.a,{className:I()({active:"3"===r}),onClick:function(){o("3")}},"Markers")),l.a.createElement(k.a,null,l.a.createElement(F.a,null))),l.a.createElement(S.a,{activeTab:r},l.a.createElement(L.a,{style:{backgroundColor:"",borderColor:"",height:"18rem"},tabId:"1"},l.a.createElement(N.a,null,l.a.createElement(x.a,null,l.a.createElement(R.a,{style:{padding:"1rem"},lg:"4",sm:"8"},l.a.createElement("div",null,l.a.createElement(j.a,{body:!0,outline:!0,color:"secondary",style:{backgroundColor:"",borderColor:"",height:"17rem"}},l.a.createElement("h6",null," ",l.a.createElement("strong",null,"Location")),l.a.createElement(O.a,null,"Latitude: ",e.lat),l.a.createElement(O.a,null,"Longitude: ",e.lng),l.a.createElement("form",{onSubmit:e.submission},l.a.createElement("input",{value:e.latitude,placeholder:"Latitude"})," ",l.a.createElement("input",{value:e.longitude,placeholder:"Longitude"}),l.a.createElement(W.a,{style:{margin:"5px"},type:"submit"}," Go")),l.a.createElement("form",{onSubmit:e.subs},l.a.createElement("input",{value:e.latitude,placeholder:"City, State"}),l.a.createElement(W.a,{style:{margin:"5px"},type:"submit"},"Go "))))),l.a.createElement(R.a,{style:{padding:"1rem"},lg:"4",sm:"8"},l.a.createElement("div",null,l.a.createElement(j.a,{body:!0,outline:!0,color:"secondary",style:{borderColor:"",height:"17rem"}},l.a.createElement("h6",null," ",l.a.createElement("strong",null," Weather Conditions in ",e.namers," ")),l.a.createElement("p",null," Currently ",e.description),l.a.createElement("p",null," Temperature Range: (",e.mintemp," - ",e.maxtemp," )"),l.a.createElement("p",null," Actual Temperature: ",e.temp," "),l.a.createElement("p",null," Feels like ",e.feelslike,"\xb0F "),l.a.createElement(W.a,{outline:!0,color:"primary",onClick:e.clicked}," Get Info ")))),l.a.createElement(R.a,{style:{padding:"1rem"},lg:"4",sm:"8"},l.a.createElement("div",null,l.a.createElement(j.a,{body:!0,outline:!0,color:"secondary",style:{borderColor:"",height:"17rem"}},l.a.createElement(O.a,null," Wind Direction: ",e.windchill,"\xb0 "),l.a.createElement("p",null," Windspeed: ",e.windspeed,"mph"),l.a.createElement("p",null," Humidity: ",e.humidity,"%"))))))),l.a.createElement(L.a,{tabId:"2",style:e.style},l.a.createElement(x.a,null,l.a.createElement(R.a,{sm:"12"},l.a.createElement(j.a,{body:!0},e.children)))),l.a.createElement(L.a,{tabId:"3"},l.a.createElement(N.a,null,l.a.createElement(x.a,null,l.a.createElement(R.a,{style:{padding:"3rem"},lg:"12",sm:"12"},e.chillin))))))}),A=a(301),P=a(302),_=a(303),D=a(304),G=a(305),J="localhost"===window.location.hostname?"http://localhost:5000/api/v1/messages":"https://api.traildocs.xyz/api/v1/messages";var B=a(298),V=a(299),H=a(300),U=f.a.icon({iconUrl:"https://cdn1.iconfinder.com/data/icons/social-messaging-ui-color/254000/66-512.png",iconSize:[25,41],iconAnchor:[12.5,41],popupAnchor:[0,-41]}),q=f.a.icon({iconUrl:"https://img.icons8.com/ios-filled/50/000000/marker.png",iconSize:[15,21],iconAnchor:[12.5,41],popupAnchor:[0,-41]}),K="835b97c0a67111ffa63d717ecabf34d1",Y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state=Object(m.a)({lat:51.55,lng:-.09,zoom:13,haveLocation:!1,userMessage:{FirstName:"",LastName:"",Report:""},weather:{MaxTemp:"",MinTemp:"",temp:"",description:"",humidity:"",WindSpeed:"",locality:"",FeelsLike:"",RainChance:""},showMessageForm:!1,sendingMessage:!1,sentMessage:!1,messages:[]},"zoom",1),a.getWeather=function(e){var t,n;return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.awrap(fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(a.state.lat,"&lon=").concat(a.state.lng,"&appid=").concat(K,"&units=Imperial")));case 2:return t=e.sent,e.next=5,c.a.awrap(t.json());case 5:n=e.sent,console.log(n),a.setState({weather:{MaxTemp:n.main.temp_max,MinTemp:n.main.temp_min,temp:n.main.temp,description:n.weather[0].description,humidity:n.main.humidity,WindChill:n.wind.deg,WindSpeed:n.wind.speed,locality:n.name,FeelsLike:n.main.feels_like,RainChance:n.rain}}),console.log(a.state);case 9:case"end":return e.stop()}}))},a.showMessageForm=function(){a.setState({showMessageForm:!0}),new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(){e(fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(e){return{lat:e.latitude,lng:e.longitude}})))}))})).then((function(e){a.setState({location:e,haveLocation:!0,zoom:13})}))},a.cancelMessage=function(){a.setState({showMessageForm:!1})},a.FormIsValid=function(){var e=a.state.userMessage,t=e.FirstName,n=e.LastName,l=e.Report;return t=t.trim(),n=n.trim(),l=l.trim(),!(!(t.length>0&&t.length<=20&&n.length>0&&n.length<=20&&l.length>0&&l.length<=500)||!a.state.haveLocation)},a.formSubmitted=function(e){(e.preventDefault(),a.FormIsValid())&&(a.setState({sendingMessage:!0}),function(e){return fetch(J,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}({FirstName:a.state.userMessage.FirstName,LastName:a.state.userMessage.LastName,Report:a.state.userMessage.Report,latitude:a.state.lat,longitude:a.state.lng}).then((function(e){setTimeout((function(){a.setState({sendingMessage:!1,sentMessage:!0})}),4e3)})))},a.setLocation=function(e){a.setState({lat:e.target.latitude,lng:e.target.longitude}),console.log(a.state.lat,a.state.lng)},a.valueChanged=function(e){var t=e.target,n=t.name,l=t.value;a.setState((function(e){return{userMessage:Object(o.a)({},e.userMessage,Object(m.a)({},n,l))}}))},a.pushers=function(){var e=[];if(messages.otherMessages){for(var t=0;t<messages.otherMessages;t++)e.push(l.a.createElement("p",{key:t}));return l.a.createElement("div",null,e,'"Some text value"')}},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(J).then((function(e){return e.json()})).then((function(e){var t={};return e.reduce((function(e,a){var n="".concat(a.latitude.toFixed(3)).concat(a.longitude.toFixed(3));return t[n]?(t[n].otherMessages=t[n].otherMessages||[],t[n].otherMessages.push(a)):(t[n]=a,e.push(a)),e}),[])})).then((function(t){e.setState({messages:t})})),navigator.geolocation.getCurrentPosition((function(t){e.setState({lat:t.coords.latitude,lng:t.coords.longitude,haveLocation:!0,zoom:19})}))}},{key:"render",value:function(){var e=[this.state.lat,this.state.lng];return l.a.createElement("div",null,l.a.createElement(y.a,{className:"Map",center:e,zoom:this.state.zoom},l.a.createElement("div",{style:{background:"white"}}),l.a.createElement(v.a,{attribution:'&copy <a href="http://{s}osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.state.haveLocation?l.a.createElement(b.a,{position:e,icon:q},l.a.createElement(w.a,null,l.a.createElement("h6",null," Current Location "),l.a.createElement("p",null,"latitude: ",this.state.lat),l.a.createElement("p",null,"longitude: ",this.state.lng))):l.a.createElement("h3",null,"Finding your location..."),this.state.messages.map((function(e){return l.a.createElement(b.a,{key:e._id,position:[e.latitude,e.longitude],icon:U},l.a.createElement(w.a,null,l.a.createElement("p",null,e.LastName," ",e.FirstName," ",e.Report," "),e.otherMessages?e.otherMessages.map((function(e){return l.a.createElement("p",{key:e._id},l.a.createElement("em",null,e.LastName,":")," ",e.FirstName," ",e.Report)})):""))}))),l.a.createElement(z,{lat:this.state.lat,lng:this.state.lng,getWeather:this.getWeather,description:this.state.weather.description,maxtemp:this.state.weather.MaxTemp,mintemp:this.state.weather.MinTemp,temp:this.state.weather.temp,humidity:this.state.weather.humidity,windchill:this.state.weather.WindChill,windspeed:this.state.weather.WindSpeed,heading:this.pushers,clicked:this.getWeather,namers:this.state.weather.locality,RainChance:this.state.weather.RainChance,subs:this.setLocation,feelslike:this.state.weather.FeelsLike,chillin:this.state.messages.map((function(e){return l.a.createElement(B.a,{key:e._id,position:[e.latitude,e.longitude],icon:U},l.a.createElement(B.a,null," ",l.a.createElement(V.a,null,l.a.createElement("strong",null,e.LastName),", ",e.FirstName)," ",l.a.createElement(H.a,null,", ",e.latitude,",",e.longitude," Report : ",e.Report," ")),e.otherMessages?e.otherMessages.map((function(e){return l.a.createElement(B.a,{key:e._id}," ",l.a.createElement(V.a,null,l.a.createElement("strong",null,e.LastName),", ",e.FirstName)," ",l.a.createElement(H.a,null," ",e.latitude,",",e.longitude,"  Report: ",e.Report))})):"")}))},this.state.sendingMessage?l.a.createElement("video",{autoPlay:!0,loop:!0,src:"https://media.giphy.com/media/42KYAoPAaqIlG/giphy.mp4"}," "):l.a.createElement(A.a,{onSubmit:this.formSubmitted,style:{borderColor:"",height:"18rem"}},l.a.createElement(P.a,null,l.a.createElement(_.a,{for:"FirstName"},"First Name"),l.a.createElement(D.a,{type:"text",name:"FirstName",id:"FirstName",placeholder:"John",onChange:this.valueChanged})),l.a.createElement(P.a,null,l.a.createElement(_.a,{for:"LastName"},"Last Name"),l.a.createElement(D.a,{type:"text",name:"LastName",id:"LastName",placeholder:"Doe",onChange:this.valueChanged})),l.a.createElement(P.a,null,l.a.createElement(_.a,{for:"exampleSelect"},"Incident Code"),l.a.createElement(D.a,{type:"select",name:"select",id:"exampleSelect"},l.a.createElement("option",null,"1 - Wildlife"),l.a.createElement("option",null,"2 - Path Blockages"),l.a.createElement("option",null,"3 - Suspicious Human Activity"),l.a.createElement("option",null,"4 - Lost/Found Possession "),l.a.createElement("option",null,"5 - Other (detail in report summary)"))),l.a.createElement(P.a,null,l.a.createElement(_.a,{for:"Report"},"Report statement"),l.a.createElement(D.a,{type:"textarea",name:"Report",id:"Report",onChange:this.valueChanged})),l.a.createElement(P.a,null,l.a.createElement(_.a,{for:"exampleFile"},"upload image"),l.a.createElement(D.a,{type:"file",name:"file",id:"exampleFile",onChange:this.valueChanged}),l.a.createElement(G.a,{color:"muted"},"testing phase v0.2")),l.a.createElement(W.a,{type:"submit",disabled:!this.FormIsValid()},"Submit"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[149,1,2]]]);
//# sourceMappingURL=main.a7bd7481.chunk.js.map